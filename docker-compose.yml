version: "3.8"

services:
  # Student Dashboard Application (SQLite) - FlagYard Challenge
  app:
    build: .
    container_name: student-dashboard-app
    ports:
      - "5000:5000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=file:./dev.db
      - JWT_SECRET=supers3cr3t_adm1n_s1gn1ng_k3y_a222
      - FLAG=FlagY{example_flag_for_testing}
    # No persistent volumes; uploads are ephemeral inside the container
    restart: unless-stopped
    # Use the run.sh script for proper jail execution
    command: ["/srv/app/run"]
    # Remove healthcheck as it's not needed for FlagYard challenges
    mem_limit: 1g
